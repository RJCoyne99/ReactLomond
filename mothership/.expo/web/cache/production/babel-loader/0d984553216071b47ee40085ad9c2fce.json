{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.WebView=undefined;var _jsxFileName='src/index.js';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _qs=require('qs');var _qs2=_interopRequireDefault(_qs);var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require(\"react-native-web/dist/index\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var WebView=exports.WebView=function(_Component){_inherits(WebView,_Component);function WebView(props){_classCallCheck(this,WebView);var _this=_possibleConstructorReturn(this,(WebView.__proto__||Object.getPrototypeOf(WebView)).call(this,props));_this.state={html:null};_this.setRef=function(ref){return _this.frameRef=ref;};_this.handleSource=function(source,newWindow){if(!source.method)return;if(newWindow){_this.handleSourceInNewWindow(source,newWindow);}else{_this.handleSourceInIFrame(source);}};_this.handleSourceInIFrame=function(source){var uri=source.uri,options=_objectWithoutProperties(source,['uri']);var baseUrl=uri.substr(0,uri.lastIndexOf('/')+1);fetch(uri,options).then(function(response){return response.text();}).then(function(html){return _this.setState({html:'<base href=\"'+baseUrl+'\" />'+html});});};_this.handleSourceInNewWindow=function(source,newWindow){if(source.method==='POST'){var contentType=source.headers['Content-Type'];var body='';if(contentType&&contentType.includes('application/x-www-form-urlencoded')){body=_qs2.default.parse(source.body);}else{console.warn('[WebView] When opening a new window, this content-type is not supported yet, please make a PR!',contentType);return;}window.open(require(\"./postMock.html\")+'?'+_qs2.default.stringify({uri:source.uri,body:JSON.stringify(body)}),newWindow.name||'webview',newWindow.features||undefined);}else{console.warn('[WebView] When opening a new window, this method is not supported yet, please make a PR!',source.method);}};_this.onMessage=function(nativeEvent){return _this.props.onMessage({nativeEvent:nativeEvent});};_this.postMessage=function(message,origin){_this.frameRef.contentWindow.postMessage(message,origin);};_this.handleInjectedJavaScript=function(html){if(_this.props.injectedJavaScript){if(html){return html.replace('</body>','<script>'+_this.props.injectedJavaScript+'</script></body>');}else{return html;}}else{return html;}};_this.handleSource(props.source,props.newWindow);return _this;}_createClass(WebView,[{key:'componentDidMount',value:function componentDidMount(){if(this.props.onMessage){window.addEventListener('message',this.onMessage,true);}}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(this.props.source.uri!==nextProps.source.uri||this.props.source.method!==nextProps.source.method||this.props.source.body!==nextProps.source.body){this.handleSource(nextProps.source,nextProps.newWindow);}}},{key:'componentWillUnmount',value:function componentWillUnmount(){if(this.props.onMessage){window.removeEventListener('message',this.onMessage,true);}}},{key:'render',value:function render(){if(this.props.newWindow){return _react2.default.createElement(_reactNative.View,{style:styles.loadingContainer,__source:{fileName:_jsxFileName,lineNumber:112}},_react2.default.createElement(_reactNative.ActivityIndicator,{__source:{fileName:_jsxFileName,lineNumber:113}}));}var _props=this.props,title=_props.title,source=_props.source,onLoad=_props.onLoad,scrollEnabled=_props.scrollEnabled;var styleObj=_reactNative.StyleSheet.flatten(this.props.style);return(0,_reactNative.unstable_createElement)('iframe',{title:title,ref:this.setRef,src:!source.method?source.uri:undefined,srcDoc:this.handleInjectedJavaScript(this.state.html||source.html),width:styleObj&&styleObj.width,height:styleObj&&styleObj.height,style:_reactNative.StyleSheet.flatten([styles.iframe,scrollEnabled&&styles.noScroll,this.props.style]),allowFullScreen:true,allowpaymentrequest:'true',frameBorder:'0',seamless:true,onLoad:onLoad});}}]);return WebView;}(_react.Component);WebView.defaultProps={scrollEnabled:true};exports.default=WebView;var styles=_reactNative.StyleSheet.create({loadingContainer:{flex:1,alignItems:'center',justifyContent:'center'},iframe:{width:'100%',height:'100%',borderWidth:0},noScroll:{overflow:'hidden'}});","map":{"version":3,"sources":["/Users/joshuafarmer-macbook_pro/IOPEWQ-Synced/WebStudioScotland/Development/WebStudioScotland/Lomond-2022/mothership/node_modules/react-native-web-webview/dist/index.js"],"names":["Object","defineProperty","exports","value","WebView","undefined","_jsxFileName","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_qs","require","_qs2","_interopRequireDefault","_react","_react2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","hasOwnProperty","call","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Component","_this","getPrototypeOf","state","html","setRef","ref","frameRef","handleSource","source","newWindow","method","handleSourceInNewWindow","handleSourceInIFrame","uri","options","baseUrl","substr","lastIndexOf","fetch","then","response","text","setState","contentType","headers","body","includes","parse","console","warn","window","open","stringify","JSON","name","features","onMessage","nativeEvent","postMessage","message","origin","contentWindow","handleInjectedJavaScript","injectedJavaScript","replace","componentDidMount","addEventListener","componentWillReceiveProps","nextProps","componentWillUnmount","removeEventListener","render","createElement","_reactNative","View","style","styles","loadingContainer","__source","fileName","lineNumber","ActivityIndicator","_props","title","onLoad","scrollEnabled","styleObj","StyleSheet","flatten","unstable_createElement","src","srcDoc","width","height","iframe","noScroll","allowFullScreen","allowpaymentrequest","frameBorder","seamless","Component","defaultProps","flex","alignItems","justifyContent","borderWidth","overflow"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});exports.WebView=undefined;var _jsxFileName='src/index.js';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _qs=require('qs');var _qs2=_interopRequireDefault(_qs);var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var WebView=exports.WebView=function(_Component){_inherits(WebView,_Component);function WebView(props){_classCallCheck(this,WebView);var _this=_possibleConstructorReturn(this,(WebView.__proto__||Object.getPrototypeOf(WebView)).call(this,props));_this.state={html:null};_this.setRef=function(ref){return _this.frameRef=ref;};_this.handleSource=function(source,newWindow){if(!source.method)return;if(newWindow){_this.handleSourceInNewWindow(source,newWindow);}else{_this.handleSourceInIFrame(source);}};_this.handleSourceInIFrame=function(source){var uri=source.uri,options=_objectWithoutProperties(source,['uri']);var baseUrl=uri.substr(0,uri.lastIndexOf('/')+1);fetch(uri,options).then(function(response){return response.text();}).then(function(html){return _this.setState({html:'<base href=\"'+baseUrl+'\" />'+html});});};_this.handleSourceInNewWindow=function(source,newWindow){if(source.method==='POST'){var contentType=source.headers['Content-Type'];var body='';if(contentType&&contentType.includes('application/x-www-form-urlencoded')){body=_qs2.default.parse(source.body);}else{console.warn('[WebView] When opening a new window, this content-type is not supported yet, please make a PR!',contentType);return;}window.open(require('./postMock.html')+'?'+_qs2.default.stringify({uri:source.uri,body:JSON.stringify(body)}),newWindow.name||'webview',newWindow.features||undefined);}else{console.warn('[WebView] When opening a new window, this method is not supported yet, please make a PR!',source.method);}};_this.onMessage=function(nativeEvent){return _this.props.onMessage({nativeEvent:nativeEvent});};_this.postMessage=function(message,origin){_this.frameRef.contentWindow.postMessage(message,origin);};_this.handleInjectedJavaScript=function(html){if(_this.props.injectedJavaScript){if(html){return html.replace('</body>','<script>'+_this.props.injectedJavaScript+'</script></body>');}else{return html;}}else{return html;}};_this.handleSource(props.source,props.newWindow);return _this;}_createClass(WebView,[{key:'componentDidMount',value:function componentDidMount(){if(this.props.onMessage){window.addEventListener('message',this.onMessage,true);}}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(this.props.source.uri!==nextProps.source.uri||this.props.source.method!==nextProps.source.method||this.props.source.body!==nextProps.source.body){this.handleSource(nextProps.source,nextProps.newWindow);}}},{key:'componentWillUnmount',value:function componentWillUnmount(){if(this.props.onMessage){window.removeEventListener('message',this.onMessage,true);}}},{key:'render',value:function render(){if(this.props.newWindow){return _react2.default.createElement(_reactNative.View,{style:styles.loadingContainer,__source:{fileName:_jsxFileName,lineNumber:112}},_react2.default.createElement(_reactNative.ActivityIndicator,{__source:{fileName:_jsxFileName,lineNumber:113}}));}var _props=this.props,title=_props.title,source=_props.source,onLoad=_props.onLoad,scrollEnabled=_props.scrollEnabled;var styleObj=_reactNative.StyleSheet.flatten(this.props.style);return(0,_reactNative.unstable_createElement)('iframe',{title:title,ref:this.setRef,src:!source.method?source.uri:undefined,srcDoc:this.handleInjectedJavaScript(this.state.html||source.html),width:styleObj&&styleObj.width,height:styleObj&&styleObj.height,style:_reactNative.StyleSheet.flatten([styles.iframe,scrollEnabled&&styles.noScroll,this.props.style]),allowFullScreen:true,allowpaymentrequest:'true',frameBorder:'0',seamless:true,onLoad:onLoad});}}]);return WebView;}(_react.Component);WebView.defaultProps={scrollEnabled:true};exports.default=WebView;var styles=_reactNative.StyleSheet.create({loadingContainer:{flex:1,alignItems:'center',justifyContent:'center'},iframe:{width:'100%',height:'100%',borderWidth:0},noScroll:{overflow:'hidden'}});"]},"metadata":{},"sourceType":"script"}