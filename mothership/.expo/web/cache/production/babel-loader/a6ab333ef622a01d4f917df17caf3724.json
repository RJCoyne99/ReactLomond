{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Constants from\"expo-constants\";import S from\"../constants/c1--Styles\";import C from\"../constants/c2--Colours\";import O from\"../constants/c3--Objects\";import T from\"../constants/c4--Text\";import L from\"../constants/c5--Links\";import A from\"../constants/c6--Actions\";import N from\"../constants/c7--Navigation\";import D from\"../constants/c8--Data\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Leads(props){var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),isLoading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var APIURL=L.CRM_URL;var headers={Accept:\"application/json\",\"Content-Type\":\"application/json\"};var Data={repName:\"DC Dwayne\"};useEffect(function(){fetch(APIURL,{method:\"POST\",headers:headers,body:JSON.stringify(Data)}).then(function(Response){return Response.json();}).then(function(Response){Response=Response.filter(function(item){return item.name_value_list.rep_name_c.value==props.userName;}).map(function(_ref){var id=_ref.id,name_value_list=_ref.name_value_list;return{id:id,name_value_list:name_value_list};});setData(Response);console.log(Response);}).catch(function(error){console.error(\"ERROR FOUND\"+error);}).finally(function(){return setLoading(false);});},[]);var testData=[{id:\"1\",name_value_list:{rep_name_c:{name:\"rep_name_c\",value:props.userName},name:{name:\"name\",value:\"Name Test\"},phone_home:{name:\"phone_home\",value:\"Name Test\"},primary_address_street:{name:\"primary_address_street\",value:\"Address Test\"},primary_address_postalcode:{name:\"primary_address_postalcode\",value:\"Post Code Test\"},appointmenttime_c:{name:\"appointmenttime_c\",value:\"Appointment Time Test\"}}}];return _jsxs(View,{style:{flex:1,padding:24},children:[_jsx(Text,{style:[S.headerText,{paddingBottom:30}],children:\" LEADS \"}),_jsx(Text,{style:[S.headerText,{paddingBottom:30,fontSize:18}],children:props.userName}),_jsx(FlatList,{data:testData,keyExtractor:function keyExtractor(_ref2,index){var id=_ref2.id;return id;},renderItem:function renderItem(_ref3){var item=_ref3.item;return _jsx(View,{style:S.listItem,children:_jsx(TouchableOpacity,{onPress:function onPress(){props.lead(item);console.log(props.product);console.log(props.product);props.pageChange(2);},children:_jsx(Text,{children:\"ID: \"+item.id+\"\\n  Rep Name: \"+item.name_value_list.rep_name_c.value+\"\\n  Name: \"+item.name_value_list.name.value+\"\\n  Phone: \"+item.name_value_list.phone_home.value+\"\\n  Address: \"+item.name_value_list.primary_address_street.value+\"\\n  Post Code: \"+item.name_value_list.primary_address_postalcode.value+\"\\n  Appointment Time: \"+item.name_value_list.appointmenttime_c.value+\"\\n \"})})});}}),isLoading?_jsx(Text,{children:\"Loading...\"}):_jsx(View,{style:{flex:1,flexDirection:\"column\",justifyContent:\"space-between\"},children:_jsx(FlatList,{data:data,keyExtractor:function keyExtractor(_ref4,index){var id=_ref4.id;return id;},renderItem:function renderItem(_ref5){var item=_ref5.item;return _jsx(View,{style:S.listItem,children:_jsx(TouchableOpacity,{onPress:function onPress(){props.lead(item);console.log(props.product);console.log(props.product);props.pageChange(22);},children:_jsx(Text,{children:\"ID: \"+item.id+\"\\n  Rep Name: \"+item.name_value_list.rep_name_c.value+\"\\n  Name: \"+item.name_value_list.name.value+\"\\n  Phone: \"+item.name_value_list.phone_home.value+\"\\n  Address: \"+item.name_value_list.primary_address_street.value+\"\\n  Post Code: \"+item.name_value_list.primary_address_postalcode.value+\"\\n  Appointment Time: \"+item.name_value_list.appointmenttime_c.value+\"\\n \"})})});}})})]});}var styles=StyleSheet.create({container:{flex:1,justifyContent:\"center\",paddingTop:Constants.statusBarHeight,backgroundColor:\"#ecf0f1\",padding:8,width:\"100%\"}});","map":{"version":3,"sources":["/Users/joshuafarmer-macbook_pro/IOPEWQ-Synced/WebStudioScotland/Development/WebStudioScotland/Lomond-2022/mothership/src/screens/LeadsTwo.js"],"names":["React","useEffect","useState","Constants","S","C","O","T","L","A","N","D","Leads","props","isLoading","setLoading","data","setData","APIURL","CRM_URL","headers","Accept","Data","repName","fetch","method","body","JSON","stringify","then","Response","json","filter","item","name_value_list","rep_name_c","value","userName","map","id","console","log","catch","error","finally","testData","name","phone_home","primary_address_street","primary_address_postalcode","appointmenttime_c","flex","padding","headerText","paddingBottom","fontSize","index","listItem","lead","product","pageChange","flexDirection","justifyContent","styles","StyleSheet","create","container","paddingTop","statusBarHeight","backgroundColor","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Text,\r\n  View,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  FlatList,\r\n} from \"react-native\";\r\nimport Constants from \"expo-constants\";\r\n\r\nimport S from \"../constants/c1--Styles\";\r\nimport C from \"../constants/c2--Colours\";\r\nimport O from \"../constants/c3--Objects\";\r\nimport T from \"../constants/c4--Text\";\r\nimport L from \"../constants/c5--Links\";\r\nimport A from \"../constants/c6--Actions\";\r\nimport N from \"../constants/c7--Navigation\";\r\nimport D from \"../constants/c8--Data\";\r\n\r\nexport default function Leads(props) {\r\n  const [isLoading, setLoading] = React.useState(true);\r\n  const [data, setData] = React.useState([]);\r\n\r\n  var APIURL = L.CRM_URL;\r\n  var headers = {\r\n    Accept: \"application/json\",\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n  var Data = {\r\n    // repName: repName\r\n    repName: \"DC Dwayne\",\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(APIURL, {\r\n      method: \"POST\",\r\n      headers: headers,\r\n      body: JSON.stringify(Data),\r\n    })\r\n      .then((Response) => Response.json())\r\n      .then((Response) => {\r\n        // setData(Response);\r\n\r\n        Response = Response.filter(function (item) {\r\n          // return item.name_value_list.rep_name_c.value == \"Chris\";\r\n          return item.name_value_list.rep_name_c.value == props.userName;\r\n        }).map(function ({ id, name_value_list }) {\r\n          return { id, name_value_list };\r\n        });\r\n        setData(Response);\r\n        console.log(Response);\r\n\r\n        // console.log(data);\r\n        // return Response;\r\n        // alert(Response);ß\r\n        // console.log(Response);\r\n        // Response.map((item, index) => {\r\n        // console.log(item);})\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"ERROR FOUND\" + error);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  let testData = [\r\n    {\r\n      id: \"1\",\r\n      name_value_list: {\r\n        rep_name_c: { name: \"rep_name_c\", value: props.userName },\r\n        name: { name: \"name\", value: \"Name Test\" },\r\n        phone_home: { name: \"phone_home\", value: \"Name Test\" },\r\n        primary_address_street: {\r\n          name: \"primary_address_street\",\r\n          value: \"Address Test\",\r\n        },\r\n        primary_address_postalcode: {\r\n          name: \"primary_address_postalcode\",\r\n          value: \"Post Code Test\",\r\n        },\r\n        appointmenttime_c: {\r\n          name: \"appointmenttime_c\",\r\n          value: \"Appointment Time Test\",\r\n        },\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <View style={{ flex: 1, padding: 24 }}>\r\n      <Text style={[S.headerText, { paddingBottom: 30 }]}> LEADS </Text>\r\n      <Text style={[S.headerText, { paddingBottom: 30, fontSize: 18 }]}>\r\n        {props.userName}\r\n      </Text>\r\n\r\n      <FlatList\r\n        data={testData}\r\n        keyExtractor={({ id }, index) => id}\r\n        renderItem={({ item }) => (\r\n          <View style={S.listItem}>\r\n            <TouchableOpacity\r\n              onPress={() => {\r\n                props.lead(item);\r\n                console.log(props.product);\r\n                console.log(props.product);\r\n                props.pageChange(2);\r\n              }}\r\n            >\r\n              <Text>\r\n                {\"ID: \" +\r\n                  item.id +\r\n                  \"\\n  Rep Name: \" +\r\n                  item.name_value_list.rep_name_c.value +\r\n                  \"\\n  Name: \" +\r\n                  item.name_value_list.name.value +\r\n                  \"\\n  Phone: \" +\r\n                  item.name_value_list.phone_home.value +\r\n                  \"\\n  Address: \" +\r\n                  item.name_value_list.primary_address_street.value +\r\n                  \"\\n  Post Code: \" +\r\n                  item.name_value_list.primary_address_postalcode.value +\r\n                  \"\\n  Appointment Time: \" +\r\n                  item.name_value_list.appointmenttime_c.value +\r\n                  \"\\n \"}\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        )}\r\n      />\r\n\r\n      {/* TODO FIX LOADING STYLES */}\r\n      {isLoading ? (\r\n        <Text>Loading...</Text>\r\n      ) : (\r\n        <View\r\n          style={{\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          {/* <Text style={{ fontSize: 18, color: 'green', textAlign: 'center'}}>{data.title}</Text>\r\n          <Text style={{ fontSize: 14, color: 'green', textAlign: 'center', paddingBottom: 10}}>Leads:</Text> */}\r\n          <FlatList\r\n            data={data}\r\n            keyExtractor={({ id }, index) => id}\r\n            renderItem={({ item }) => (\r\n              <View style={S.listItem}>\r\n                <TouchableOpacity\r\n                  onPress={() => {\r\n                    props.lead(item);\r\n                    console.log(props.product);\r\n                    console.log(props.product);\r\n                    props.pageChange(22);\r\n                  }}\r\n                >\r\n                  <Text>\r\n                    {\"ID: \" +\r\n                      item.id +\r\n                      \"\\n  Rep Name: \" +\r\n                      item.name_value_list.rep_name_c.value +\r\n                      \"\\n  Name: \" +\r\n                      item.name_value_list.name.value +\r\n                      \"\\n  Phone: \" +\r\n                      item.name_value_list.phone_home.value +\r\n                      \"\\n  Address: \" +\r\n                      item.name_value_list.primary_address_street.value +\r\n                      \"\\n  Post Code: \" +\r\n                      item.name_value_list.primary_address_postalcode.value +\r\n                      \"\\n  Appointment Time: \" +\r\n                      item.name_value_list.appointmenttime_c.value +\r\n                      \"\\n \"}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            )}\r\n          />\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    paddingTop: Constants.statusBarHeight,\r\n    backgroundColor: \"#ecf0f1\",\r\n    padding: 8,\r\n    width: \"100%\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}